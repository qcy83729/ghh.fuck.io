"use strict";(self["webpackChunkinvestment_advisor_fe"]=self["webpackChunkinvestment_advisor_fe"]||[]).push([[613],{5722:function(t,e,i){i.r(e),i.d(e,{default:function(){return B}});var n=function(){var t=this,e=t._self._c;return e("div",{staticClass:"wrap"},[e("header-nav",{ref:"headerNav",staticClass:"header",attrs:{title:"视频详情","z-index":999}}),t.video?e("div",{staticClass:"video-wrap",style:`--top:${t.top}px`},[e("video-player",{ref:"videoRef",staticClass:"mini-player",attrs:{url:t.video.link,height:t.videoHeight,"video-options":t.videoOptions},on:{"video-canplay":t.onVideoCanplay,timeupdate:t.onPlaying}})],1):t._e(),e("muted-btn",{staticClass:"btn-volume",attrs:{muted:t.videoMuted},on:{"btn-click":t.handleMuted}}),e("div",{staticClass:"footer"},[e("div",{staticClass:"info-wrap"},[t.video?e("div",{staticClass:"info-head"},[t.avatar?e("van-image",{staticClass:"info-avatar",attrs:{src:t.avatar}}):t._e(),t.groupName?e("div",{staticClass:"u-flex-1 info-author u-font-15"},[t._v(" "+t._s(t.groupName)+" ")]):t._e(),t.video?e("share-btn",{staticClass:"icon-share",attrs:{url:t.shareUrl,title:t.video.title,content:t.video.abs,cover:t.video.cover}}):t._e()],1):t._e(),e("div",{staticClass:"info-body u-color-f u-font-12"},[e("div",{staticClass:"info-content",class:t.expand?"info-content-expand":""},[t._v(" "+t._s(t.formatContent)+" ")]),e("div",{staticClass:"flex-center"},[t.enableExpand&&t.expand?e("van-button",{staticClass:"btn-close",attrs:{type:"default"},on:{click:t.toggleExpand}},[e("i",{staticClass:"fa fa-close-circle"})]):t._e()],1),t.enableExpand&&!t.expand?e("div",{staticClass:"btn-expand",on:{click:function(e){return e.stopPropagation(),t.toggleExpand.apply(null,arguments)}}},[t._v(" 展示全文 ")]):t._e()])]),e("div",{staticClass:"progress-bar"},[e("van-slider",{attrs:{step:.001,"button-size":"12","bar-height":"3px","active-color":"#fff3","inactive-color":"#343434"},on:{change:t.onSliderChange,input:t.onSliderChanging},model:{value:t.percentage,callback:function(e){t.percentage=e},expression:"percentage"}})],1),t.ip?t._e():e("div",{staticClass:"info-link"},[e("div",{staticClass:"info-link-content",on:{click:t.toQuestion}},[e("div",{staticClass:"flex-center"},[e("img",{staticClass:"edit-icon",attrs:{src:i(2291)}}),e("span",{staticClass:"u-font-15"},[t._v("点击参加“派”对")])]),t._m(0)])])])],1)},a=[function(){var t=this,e=t._self._c;return e("span",{staticClass:"icon-right flex-center"},[e("i",{staticClass:"fa fa-arrow-right"})])}],r=i(8534),o=i(4648),s=(i(5773),i(5791)),l=(i(1958),i(2787)),u=i(789),d=i(8546);function c(t){if(!(0,d.Xq)(t))return t;if(Array.isArray(t))return t.map((function(t){return c(t)}));if("object"===typeof t){var e={};return Object.keys(t).forEach((function(i){e[i]=c(t[i])})),e}return t}var h=i(5566),v=i(8169),f=i(4611),g=i(2098),p=(0,l.d)("slider"),m=p[0],b=p[1],y=function(t,e){return JSON.stringify(t)===JSON.stringify(e)},C=m({mixins:[f.D,g.f],props:{disabled:Boolean,vertical:Boolean,range:Boolean,barHeight:[Number,String],buttonSize:[Number,String],activeColor:String,inactiveColor:String,min:{type:[Number,String],default:0},max:{type:[Number,String],default:100},step:{type:[Number,String],default:1},value:{type:[Number,Array],default:0}},data:function(){return{dragStatus:""}},computed:{scope:function(){return this.max-this.min},buttonStyle:function(){if(this.buttonSize){var t=(0,u.N)(this.buttonSize);return{width:t,height:t}}}},created:function(){this.updateValue(this.value)},mounted:function(){this.range?(this.bindTouchEvent(this.$refs.wrapper0),this.bindTouchEvent(this.$refs.wrapper1)):this.bindTouchEvent(this.$refs.wrapper)},methods:{onTouchStart:function(t){this.disabled||(this.touchStart(t),this.currentValue=this.value,this.range?this.startValue=this.value.map(this.format):this.startValue=this.format(this.value),this.dragStatus="start")},onTouchMove:function(t){if(!this.disabled){"start"===this.dragStatus&&this.$emit("drag-start"),(0,h.PF)(t,!0),this.touchMove(t),this.dragStatus="draging";var e=this.$el.getBoundingClientRect(),i=this.vertical?this.deltaY:this.deltaX,n=this.vertical?e.height:e.width,a=i/n*this.scope;this.range?this.currentValue[this.index]=this.startValue[this.index]+a:this.currentValue=this.startValue+a,this.updateValue(this.currentValue)}},onTouchEnd:function(){this.disabled||("draging"===this.dragStatus&&(this.updateValue(this.currentValue,!0),this.$emit("drag-end")),this.dragStatus="")},onClick:function(t){if(t.stopPropagation(),!this.disabled){var e=this.$el.getBoundingClientRect(),i=this.vertical?t.clientY-e.top:t.clientX-e.left,n=this.vertical?e.height:e.width,a=+this.min+i/n*this.scope;if(this.range){var r=this.value,o=r[0],s=r[1],l=(o+s)/2;a<=l?o=a:s=a,a=[o,s]}this.startValue=this.value,this.updateValue(a,!0)}},handleOverlap:function(t){return t[0]>t[1]?(t=c(t),t.reverse()):t},updateValue:function(t,e){t=this.range?this.handleOverlap(t).map(this.format):this.format(t),y(t,this.value)||this.$emit("input",t),e&&!y(t,this.startValue)&&this.$emit("change",t)},format:function(t){var e=+this.min,i=+this.max,n=+this.step;t=(0,v.w6)(t,e,i);var a=Math.round((t-e)/n)*n;return(0,v.Ft)(e,a)}},render:function(){var t,e,i=this,n=arguments[0],a=this.vertical,r=a?"height":"width",o=a?"width":"height",s=(t={background:this.inactiveColor},t[o]=(0,u.N)(this.barHeight),t),l=function(){var t=i.value,e=i.min,n=i.range,a=i.scope;return n?100*(t[1]-t[0])/a+"%":100*(t-e)/a+"%"},d=function(){var t=i.value,e=i.min,n=i.range,a=i.scope;return n?100*(t[0]-e)/a+"%":null},c=(e={},e[r]=l(),e.left=this.vertical?null:d(),e.top=this.vertical?d():null,e.background=this.activeColor,e);this.dragStatus&&(c.transition="none");var h=function(t){var e=["left","right"],a="number"===typeof t,r=a?i.value[t]:i.value,o=function(){return a?"button-wrapper-"+e[t]:"button-wrapper"},s=function(){return a?"wrapper"+t:"wrapper"},l=function(){if(a){var e=i.slots(0===t?"left-button":"right-button",{value:r});if(e)return e}return i.slots("button")?i.slots("button"):n("div",{class:b("button"),style:i.buttonStyle})};return n("div",{ref:s(),attrs:{role:"slider",tabindex:i.disabled?-1:0,"aria-valuemin":i.min,"aria-valuenow":i.value,"aria-valuemax":i.max,"aria-orientation":i.vertical?"vertical":"horizontal"},class:b(o()),on:{touchstart:function(){a&&(i.index=t)},click:function(t){return t.stopPropagation()}}},[l()])};return n("div",{style:s,class:b({disabled:this.disabled,vertical:a}),on:{click:this.onClick}},[n("div",{class:b("bar"),style:c},[this.range?[h(0),h(1)]:h()])])}}),x=(i(8029),i(4951)),S=(i(8838),i(1392)),w=(i(2355),i(9233)),$=(i(7658),i(4192)),k=i(8180),Z=i(9376),P=i(7558),L=i(4680),N=i(7484),E=i(629),V={name:"StoryVideoPage",components:{HeaderNav:$.Z,ShareBtn:Z.Z,MutedBtn:P.Z,VideoPlayer:k.Z,[w.Z.name]:w.Z,[S.Z.name]:S.Z,[x.Z.name]:x.Z,[C.name]:C,[s.Z.name]:s.Z},data(){return{video:null,ip:null,videoOptions:{autoplay:!0,muted:!0,lastPlayTime:0,"x5-video-player-type":"h5",playsinline:!0,"x5-video-player-fullscreen":!1,closeInactive:!0,closeVideoStopPropagation:!0,closePlayVideoFocus:!0,errorTips:"<span>视频加载失败</span>",controls:!1},expand:!1,videoMuted:null,top:0,percentage:0,videoHeight:"100%",duration:0,enableTimeChange:!1}},computed:(0,o.Z)((0,o.Z)({},(0,E.rn)("user",["isTradeLogin","mobile"])),{},{avatar(){var t,e,i;return null!==(t=null===this||void 0===this||null===(e=this.video)||void 0===e||null===(i=e.qr)||void 0===i?void 0:i.adviserPhoto)&&void 0!==t?t:""},groupName(){var t,e,i;return null!==(t=null===this||void 0===this||null===(e=this.video)||void 0===e||null===(i=e.qr)||void 0===i?void 0:i.value)&&void 0!==t?t:""},shareUrl(){return null!==this&&void 0!==this&&this.video?location.href:""},content(){var t,e;return null!==(t=null===(e=this.video)||void 0===e?void 0:e.abs)&&void 0!==t?t:""},enableExpand(){return this.content.length>=45},formatContent(){return this.enableExpand?this.expand?this.content:this.content.substring(0,45)+"...":this.content}}),created(){var t,e,i,n;const a=null!==(t=null===(e=this.$route.query)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0;this.duration=null!==(i=null===(n=this.$route.query)||void 0===n?void 0:n.duration)&&void 0!==i?i:0,this.$set(this.videoOptions,"lastPlayTime",a===this.duration?0:a-0),this.percentage=a/this.duration*100,this.getData(),this.getUserInfo()},mounted(){this.$nextTick((()=>{this.top=this.$refs.headerNav.$el.querySelector(".v2-header-box").getBoundingClientRect().height,this.videoHeight=window.innerHeight-this.top}))},methods:(0,o.Z)((0,o.Z)({},(0,E.nv)("user",["ghLogin"])),{},{getData(){var t=this;return(0,r.Z)((function*(){const e=yield(0,L.VI)({id:t.$route.query.id},{phone:t.mobile});null!==e&&void 0!==e&&e.success&&null!==e&&void 0!==e&&e.data&&(t.video=e.data)}))()},getUserInfo(){var t=this;return(0,r.Z)((function*(){try{if(!t.mobile)return;const i=yield(0,N.Ng)({mobile:t.mobile});var e;if(null!==i&&void 0!==i&&i.success)t.ip=null!==(e=null===i||void 0===i?void 0:i.factions)&&void 0!==e?e:null}catch(i){t.ip=null}}))()},handleMuted(){const t=this.$refs.videoRef.getPlayer();this.videoMuted=!t.muted,t.muted=!t.muted},toggleExpand(){this.expand=!this.expand},onSliderChanging(){this.enableTimeChange=!1},onSliderChange(t){if(this.duration){const e=this.$refs.videoRef.getPlayer();e.currentTime=t/100*this.duration,this.enableTimeChange=!0}},onVideoCanplay(){this.enableTimeChange=!0},onPlaying({currentTime:t,duration:e}){this.enableTimeChange&&(this.percentage=t/e*100)},toQuestion(){if(this.isTradeLogin)this.ip||this.$router.push({path:"/questionnaire"});else{const t=this.$route.fullpath;this.ghLogin({to:t})}}})},_=V,T=i(1001),q=(0,T.Z)(_,n,a,!1,null,"6b9a9378",null),B=q.exports},3094:function(){},7484:function(t,e,i){i.d(e,{E1:function(){return d},Ng:function(){return h},Vv:function(){return c},eb:function(){return l},nE:function(){return u}});var n=i(1073),a=i(9669),r=i.n(a),o=i(4713);const s=t=>{const{url:e,data:i,method:a,disablePop:s}=t,l=`${n.Z.interfaceBaseUrl}/${n.Z.women}/${e}`,u={["get"===a?"params":"data"]:i,url:l,method:a};return r()(u).then((t=>o.Z.response(t.data,s))).catch((t=>(o.Z.catchHandler(t.response.data),Promise.reject(t))))},l=()=>s({url:"question/list",method:"get"}),u=t=>s({disablePop:!0,url:"question/answerCalculate",method:"post",data:t}),d=t=>s({url:"question/getByBatch",method:"get",data:t}),c=t=>s({url:"question/selectFaction",method:"post",data:t}),h=t=>s({url:"question/getByMobile",method:"get",data:t})},9233:function(t,e,i){var n=i(9299),a=i(6568),r=i.n(a),o=i(2787),s=i(8546),l=i(6122),u=i(7692),d=i(806),c=i(1392),h=(0,o.d)("cell"),v=h[0],f=h[1];function g(t,e,i,n){var a,o=e.icon,d=e.size,h=e.title,v=e.label,g=e.value,p=e.isLink,m=i.title||(0,s.Xq)(h);function b(){var n=i.label||(0,s.Xq)(v);if(n)return t("div",{class:[f("label"),e.labelClass]},[i.label?i.label():v])}function y(){if(m)return t("div",{class:[f("title"),e.titleClass],style:e.titleStyle},[i.title?i.title():t("span",[h]),b()])}function C(){var n=i.default||(0,s.Xq)(g);if(n)return t("div",{class:[f("value",{alone:!m}),e.valueClass]},[i.default?i.default():t("span",[g])])}function x(){return i.icon?i.icon():o?t(c.Z,{class:f("left-icon"),attrs:{name:o,classPrefix:e.iconPrefix}}):void 0}function S(){var n=i["right-icon"];if(n)return n();if(p){var a=e.arrowDirection;return t(c.Z,{class:f("right-icon"),attrs:{name:a?"arrow-"+a:"arrow"}})}}function w(t){(0,l.j8)(n,"click",t),(0,u.fz)(n)}var $=null!=(a=e.clickable)?a:p,k={clickable:$,center:e.center,required:e.required,borderless:!e.border};return d&&(k[d]=d),t("div",r()([{class:f(k),attrs:{role:$?"button":null,tabindex:$?0:null},on:{click:w}},(0,l.ED)(n)]),[x(),y(),C(),S(),null==i.extra?void 0:i.extra()])}g.props=(0,n.Z)({},d.T,u.g2),e["Z"]=v(g)},806:function(t,e,i){i.d(e,{T:function(){return n}});var n={icon:String,size:String,center:Boolean,isLink:Boolean,required:Boolean,iconPrefix:String,titleStyle:null,titleClass:null,valueClass:null,labelClass:null,title:[Number,String],value:[Number,String],label:[Number,String],arrowDirection:String,border:{type:Boolean,default:!0},clickable:{type:Boolean,default:null}}},2355:function(t,e,i){i(1958),i(3332),i(6742),i(3094)},4951:function(t,e,i){var n=i(6568),a=i.n(n),r=i(2787),o=i(8546),s=i(789),l=i(1392),u=(0,r.d)("image"),d=u[0],c=u[1];e["Z"]=d({props:{src:String,fit:String,alt:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,iconPrefix:String,showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},errorIcon:{type:String,default:"photo-fail"},loadingIcon:{type:String,default:"photo"}},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var t={};return(0,o.Xq)(this.width)&&(t.width=(0,s.N)(this.width)),(0,o.Xq)(this.height)&&(t.height=(0,s.N)(this.height)),(0,o.Xq)(this.radius)&&(t.overflow="hidden",t.borderRadius=(0,s.N)(this.radius)),t}},created:function(){var t=this.$Lazyload;t&&o._f&&(t.$on("loaded",this.onLazyLoaded),t.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var t=this.$Lazyload;t&&(t.$off("loaded",this.onLazyLoaded),t.$off("error",this.onLazyLoadError))},methods:{onLoad:function(t){this.loading=!1,this.$emit("load",t)},onLazyLoaded:function(t){var e=t.el;e===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(t){var e=t.el;e!==this.$refs.image||this.error||this.onError()},onError:function(t){this.error=!0,this.loading=!1,this.$emit("error",t)},onClick:function(t){this.$emit("click",t)},genPlaceholder:function(){var t=this.$createElement;return this.loading&&this.showLoading?t("div",{class:c("loading")},[this.slots("loading")||t(l.Z,{attrs:{name:this.loadingIcon,classPrefix:this.iconPrefix},class:c("loading-icon")})]):this.error&&this.showError?t("div",{class:c("error")},[this.slots("error")||t(l.Z,{attrs:{name:this.errorIcon,classPrefix:this.iconPrefix},class:c("error-icon")})]):void 0},genImage:function(){var t=this.$createElement,e={class:c("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?t("img",a()([{ref:"image",directives:[{name:"lazy",value:this.src}]},e])):t("img",a()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},e]))}},render:function(){var t=arguments[0];return t("div",{class:c({round:this.round}),style:this.style,on:{click:this.onClick}},[this.genImage(),this.genPlaceholder(),this.slots()])}})},8029:function(t,e,i){i(1958),i(3332),i(6742)},2098:function(t,e,i){i.d(e,{f:function(){return n}});var n={inject:{vanField:{default:null}},watch:{value:function(){var t=this.vanField;t&&(t.resetValidation(),t.validateWithTrigger("onChange"))}},created:function(){var t=this.vanField;t&&!t.children&&(t.children=this)}}},8169:function(t,e,i){function n(t,e,i){return Math.min(Math.max(t,e),i)}function a(t,e,i){var n=t.indexOf(e),a="";return-1===n?t:"-"===e&&0!==n?t.slice(0,n):("."===e&&t.match(/^(\.|-\.)/)&&(a=n?"-0":"0"),a+t.slice(0,n+1)+t.slice(n).replace(i,""))}function r(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!0),t=e?a(t,".",/\./g):t.split(".")[0],t=i?a(t,"-",/-/g):t.replace(/-/,"");var n=e?/[^-0-9.]/g:/[^-0-9]/g;return t.replace(n,"")}function o(t,e){var i=Math.pow(10,10);return Math.round((t+e)*i)/i}i.d(e,{Ft:function(){return o},uf:function(){return r},w6:function(){return n}})},2291:function(t,e,i){t.exports=i.p+"assets/img/edit.0e6daf0d.svg"}}]);