"use strict";(self["webpackChunkinvestment_advisor_fe"]=self["webpackChunkinvestment_advisor_fe"]||[]).push([[765],{2187:function(t,i,e){e.r(i),e.d(i,{default:function(){return V}});var r=function(){var t=this,i=t._self._c;return i("div",{staticClass:"search-wrap u-bg-gray"},[i("van-sticky",{staticClass:"search-bar",style:`--top:${t.statusBarHeight}px`,attrs:{"offset-top":t.offsetTop}},[i("van-search",{staticClass:"search",attrs:{clearable:!1,placeholder:"输入关键字搜索","show-action":""},on:{input:t.onInput,search:t.onSearch,cancel:t.onCancel},model:{value:t.searchWord,callback:function(i){t.searchWord=i},expression:"searchWord"}})],1),i("transition",{attrs:{name:"van-fade",mode:"out-in"}},[t.isSearch?i("van-list",{staticClass:"u-p-l-10 u-p-r-10 u-p-t-5",attrs:{finished:t.listFinished,"finished-text":"没有更多内容了",error:t.listError,"error-text":"请求失败，点击重新加载","immediate-check":!1},on:{"update:error":function(i){t.listError=i},load:t.onLoad},model:{value:t.listLoading,callback:function(i){t.listLoading=i},expression:"listLoading"}},[i("van-row",{staticClass:"u-p-t-5",attrs:{type:"flex",gutter:10}},t._l(t.list,(function(e){return i("van-col",{key:e.ROW_ID,attrs:{span:12}},[i("story-card",t._b({staticClass:"u-m-b-10",attrs:{view:e.view_num,like:e.like_num,"cover-width":170,"cover-height":170},on:{"before-click":t.handleClick}},"story-card",e,!1))],1)})),1)],1):t._e(),t.isSearch?t._e():[i("van-cell-group",{staticClass:"u-m-t-15",attrs:{inset:""}},[i("van-cell",{attrs:{border:!1},scopedSlots:t._u([{key:"title",fn:function(){return[i("span",{staticClass:"u-font-16 u-font-weight"},[t._v("历史搜索")])]},proxy:!0}],null,!1,2520468941)},[i("van-icon",{attrs:{size:"20",name:"https://oss.ghzq.com.cn/ghmall/front-end-assets/icon/dell.png"},on:{click:t.clearHistory}})],1),t._l(t.formatHistory,(function(e,r){return i("van-cell",{key:r,scopedSlots:t._u([{key:"title",fn:function(){return[i("div",{staticClass:"u-flex"},[i("van-icon",{attrs:{name:"clock-o",color:"#909399",size:"14"}}),i("div",{staticClass:"u-flex-2 u-p-l-5 u-line-1",on:{click:function(i){return t.selectHistory(e.title)}}},[t._v(" "+t._s(e.title)+" ")]),i("div",{staticClass:"u-p-l-10 u-p-r-10",on:{click:function(i){return t.removeHistory(e)}}},[i("van-icon",{attrs:{name:"cross",color:"#909399",size:"14"}})],1)],1)]},proxy:!0}],null,!0)})}))],2)]],2)],1)},s=[],n=e(8534),o=e(4648),a=(e(1958),e(2787)),l=e(9345),c=(0,a.d)("col"),h=c[0],u=c[1],d=h({mixins:[(0,l.j)("vanRow")],props:{span:[Number,String],offset:[Number,String],tag:{type:String,default:"div"}},computed:{style:function(){var t=this.index,i=this.parent||{},e=i.spaces;if(e&&e[t]){var r=e[t],s=r.left,n=r.right;return{paddingLeft:s?s+"px":null,paddingRight:n?n+"px":null}}}},methods:{onClick:function(t){this.$emit("click",t)}},render:function(){var t,i=arguments[0],e=this.span,r=this.offset;return i(this.tag,{style:this.style,class:u((t={},t[e]=e,t["offset-"+r]=r,t)),on:{click:this.onClick}},[this.slots()])}}),f=(0,a.d)("row"),g=f[0],p=f[1],v=g({mixins:[(0,l.G)("vanRow")],props:{type:String,align:String,justify:String,tag:{type:String,default:"div"},gutter:{type:[Number,String],default:0}},computed:{spaces:function(){var t=Number(this.gutter);if(t){var i=[],e=[[]],r=0;return this.children.forEach((function(t,i){r+=Number(t.span),r>24?(e.push([i]),r-=24):e[e.length-1].push(i)})),e.forEach((function(e){var r=t*(e.length-1)/e.length;e.forEach((function(e,s){if(0===s)i.push({right:r});else{var n=t-i[e-1].right,o=r-n;i.push({left:n,right:o})}}))})),i}}},methods:{onClick:function(t){this.$emit("click",t)}},render:function(){var t,i=arguments[0],e=this.align,r=this.justify,s="flex"===this.type;return i(this.tag,{class:p((t={flex:s},t["align-"+e]=s&&e,t["justify-"+r]=s&&r,t)),on:{click:this.onClick}},[this.slots()])}}),m=(e(8838),e(1392)),y=(e(2355),e(9233)),x=(e(4289),e(4168)),b=(e(7902),e(914)),k=(e(9610),e(2163)),S=(e(3332),e(6742),e(3094),e(7984),e(6568)),w=e.n(S),$=e(9299),H=e(6122),L=e(5566),C=e(7221),T=(0,a.d)("search"),Z=T[0],_=T[1],I=T[2];function E(t,i,e,r){function s(){if(e.label||i.label)return t("div",{class:_("label")},[e.label?e.label():i.label])}function n(){if(i.showAction)return t("div",{class:_("action"),attrs:{role:"button",tabindex:"0"},on:{click:s}},[e.action?e.action():i.actionText||I("cancel")]);function s(){e.action||((0,H.j8)(r,"input",""),(0,H.j8)(r,"cancel"))}}var o={attrs:r.data.attrs,on:(0,$.Z)({},r.listeners,{keypress:function(t){13===t.keyCode&&((0,L.PF)(t),(0,H.j8)(r,"search",i.value)),(0,H.j8)(r,"keypress",t)}})},a=(0,H.ED)(r);return a.attrs=void 0,t("div",w()([{class:_({"show-action":i.showAction}),style:{background:i.background}},a]),[null==e.left?void 0:e.left(),t("div",{class:_("content",i.shape)},[s(),t(C.Z,w()([{attrs:{type:"search",border:!1,value:i.value,leftIcon:i.leftIcon,rightIcon:i.rightIcon,clearable:i.clearable,clearTrigger:i.clearTrigger},scopedSlots:{"left-icon":e["left-icon"],"right-icon":e["right-icon"]}},o]))]),n()])}E.props={value:String,label:String,rightIcon:String,actionText:String,background:String,showAction:Boolean,clearTrigger:String,shape:{type:String,default:"square"},clearable:{type:Boolean,default:!0},leftIcon:{type:String,default:"search"}};var z=Z(E),N=(e(7658),e(3948),e(541),e(629)),P=e(4680),B=function(){var t=this,i=t._self._c;return i("div",{staticClass:"u-bg-f card-wrap",on:{click:function(i){return t.toDetail(t.type)}}},[i("van-image",{staticClass:"cover",style:`--width:${t.coverWidth};--height:${t.coverHeight}`,attrs:{src:t.cover,fit:"cover","lazy-load":""}}),i("div",{staticClass:"title u-font-14 u-line-2 u-p-t-10 u-p-l-10 u-p-r-10 u-p-b-5"},[t._v(" "+t._s(t.title)+" ")]),i("div",{staticClass:"u-flex u-row-right u-font-12 u-type-info u-p-t-5 u-p-l-10 u-p-r-10 u-p-b-10"},[i("span",{staticClass:"u-m-r-10"},[i("van-icon",{attrs:{name:"eye-o"}}),t._v(t._s(t.view))],1),i("span",[i("van-icon",{attrs:{name:"like-o"}}),t._v(t._s(t.like))],1)])],1)},W=[],R=(e(8029),e(4951)),D={name:"StoryCard",components:{[R.Z.name]:R.Z,[m.Z.name]:m.Z},props:{id:{type:[String,Number],default:""},title:{type:String,default:""},cover:{type:String,default:""},view:{type:[String,Number],default:""},like:{type:[String,Number],default:""},coverWidth:{type:Number,default:480},coverHeight:{type:Number,default:270},type:{type:String,default:""}},data(){return{}},methods:{toDetail(t){this.$emit("before-click"),"1"===t?this.$router.push({path:"/story-video",query:{id:this.id}}):alert("跳转文章详情")}}},q=D,F=e(1001),j=(0,F.Z)(q,B,W,!1,null,"3620c6de",null),O=j.exports,X=e(2325),A=e(7247);const U="storySearchHistory";var Q={name:"StorySearch",components:{[z.name]:z,[k.Z.name]:k.Z,[b.Z.name]:b.Z,[x.Z.name]:x.Z,[y.Z.name]:y.Z,[m.Z.name]:m.Z,[v.name]:v,[d.name]:d,StoryCard:O},data(){return{searchWord:"",searchHistory:[],list:[],currentPage:1,offsetTop:0,listRefresh:!1,listLoading:!1,listFinished:!1,listError:!1,isSearch:!1}},computed:(0,o.Z)((0,o.Z)((0,o.Z)({},(0,N.rn)(["statusBarHeight"])),(0,N.rn)("user",["mobile"])),{},{formatHistory(){const t=this.getUserHistory();return t?t.list:[]}}),created(){this.getHistory()},mounted(){this.setOffsetTop()},methods:{setOffsetTop(){this.$nextTick((()=>{this.offsetTop=this.statusBarHeight}))},onInput:(0,X.Ds)((function(t){t?this.onSearch():(this.isSearch=!1,this.listFinished=!0,this.currentPage=1,this.list=[])}),500),onSearch(){this.searchWord&&(this.isSearch=!0,this.currentPage=1,this.searchRs=[],this.getData({title:this.searchWord,refresh:!0}))},onCancel(){this.HistoryBack()},onLoad(){this.getData({title:this.searchWord})},getData({title:t,refresh:i=!1}){var e=this;return(0,n.Z)((function*(){try{const s=yield(0,P.Wt)({page_size:10,title:t,phone:e.mobile,page_no:e.currentPage});if(null!==s&&void 0!==s&&s.success){var r;const t=null!==(r=null===s||void 0===s?void 0:s.data)&&void 0!==r?r:[],n=s.total;i?e.list=t:e.list.push(...t),e.listFinished=e.list.length>=n||!t.length,e.list.length<n&&(e.currentPage=e.currentPage+1)}else e.listError=!0}catch(s){e.listError=!0}finally{e.listLoading=!1,e.listRefresh=!1}}))()},handleClick(){this.setHistory()},selectHistory(t){this.searchWord=t,this.onSearch()},getSearchHistoryItem(){return{title:this.searchWord,timestamp:(new Date).getTime()}},setHistory(){const t=this.mobile||"unlogin",i=this.searchHistory.find((i=>i.user===t));if(i){var e;const t=null!==(e=null===i||void 0===i?void 0:i.list)&&void 0!==e?e:[],r=t.findIndex((t=>t.title===this.searchWord));-1===r?i.list.unshift(this.getSearchHistoryItem()):i.list.unshift(i.list.splice(r,1)[0])}else this.searchHistory.push({user:t,list:[this.getSearchHistoryItem()]});(0,A.qQ)(U,this.searchHistory)},getHistory(){(0,A.$o)(U).then((t=>{this.searchHistory=t||[],console.warn("this.searchHistory"),console.log(this.searchHistory)}))},getUserHistory(){const t=this.mobile||"unlogin",i=this.searchHistory.find((i=>i.user===t));return i},removeHistory(t){const i=this.getUserHistory(),e=i.list.findIndex((i=>i.title===t.title));i.list.splice(e,1),i.list.length||this.clearHistory()},clearHistory(){const t=this.mobile||"unlogin",i=this.searchHistory.findIndex((i=>i.user===t));i>-1&&(this.searchHistory.splice(i,1),(0,A.qQ)(U,this.searchHistory))}}},G=Q,J=(0,F.Z)(G,r,s,!1,null,"15425e16",null),V=J.exports},1771:function(){},4680:function(t,i,e){e.d(i,{VI:function(){return o},Wt:function(){return n}});var r=e(826),s=e(1073);const n=t=>(0,r.s)({method:"ghmsPost",url:"qry-story-list",service:s.Z.women,body:t}),o=(t,i)=>(0,r.s)({method:"ghmsPost",url:"story-info/"+t.id,service:s.Z.women,body:i})},2325:function(t,i,e){e.d(i,{Ds:function(){return n},LC:function(){return r},tJ:function(){return s}});e(4916);function r(t){return null===t||void 0===t||""===t||isNaN(t)?"":parseFloat(t)}function s(t,i=0){const e=`${t}`;if(/^\.\d{1,}$/.test(e))return r(e);const s=e.match(/(-|\+)?\d+(\.\d+)?/g);return"all"===i?Array.isArray(s)?s.map((t=>r(t))):s:s&&s[i]&&r(s[i])}const n=(t,i)=>{let e=null;return function(...r){null!==e&&clearTimeout(e),e=setTimeout((()=>{t.apply(this,r)}),i)}}},4951:function(t,i,e){var r=e(6568),s=e.n(r),n=e(2787),o=e(8546),a=e(789),l=e(1392),c=(0,n.d)("image"),h=c[0],u=c[1];i["Z"]=h({props:{src:String,fit:String,alt:String,round:Boolean,width:[Number,String],height:[Number,String],radius:[Number,String],lazyLoad:Boolean,iconPrefix:String,showError:{type:Boolean,default:!0},showLoading:{type:Boolean,default:!0},errorIcon:{type:String,default:"photo-fail"},loadingIcon:{type:String,default:"photo"}},data:function(){return{loading:!0,error:!1}},watch:{src:function(){this.loading=!0,this.error=!1}},computed:{style:function(){var t={};return(0,o.Xq)(this.width)&&(t.width=(0,a.N)(this.width)),(0,o.Xq)(this.height)&&(t.height=(0,a.N)(this.height)),(0,o.Xq)(this.radius)&&(t.overflow="hidden",t.borderRadius=(0,a.N)(this.radius)),t}},created:function(){var t=this.$Lazyload;t&&o._f&&(t.$on("loaded",this.onLazyLoaded),t.$on("error",this.onLazyLoadError))},beforeDestroy:function(){var t=this.$Lazyload;t&&(t.$off("loaded",this.onLazyLoaded),t.$off("error",this.onLazyLoadError))},methods:{onLoad:function(t){this.loading=!1,this.$emit("load",t)},onLazyLoaded:function(t){var i=t.el;i===this.$refs.image&&this.loading&&this.onLoad()},onLazyLoadError:function(t){var i=t.el;i!==this.$refs.image||this.error||this.onError()},onError:function(t){this.error=!0,this.loading=!1,this.$emit("error",t)},onClick:function(t){this.$emit("click",t)},genPlaceholder:function(){var t=this.$createElement;return this.loading&&this.showLoading?t("div",{class:u("loading")},[this.slots("loading")||t(l.Z,{attrs:{name:this.loadingIcon,classPrefix:this.iconPrefix},class:u("loading-icon")})]):this.error&&this.showError?t("div",{class:u("error")},[this.slots("error")||t(l.Z,{attrs:{name:this.errorIcon,classPrefix:this.iconPrefix},class:u("error-icon")})]):void 0},genImage:function(){var t=this.$createElement,i={class:u("img"),attrs:{alt:this.alt},style:{objectFit:this.fit}};if(!this.error)return this.lazyLoad?t("img",s()([{ref:"image",directives:[{name:"lazy",value:this.src}]},i])):t("img",s()([{attrs:{src:this.src},on:{load:this.onLoad,error:this.onError}},i]))}},render:function(){var t=arguments[0];return t("div",{class:u({round:this.round}),style:this.style,on:{click:this.onClick}},[this.genImage(),this.genPlaceholder(),this.slots()])}})},8029:function(t,i,e){e(1958),e(3332),e(6742)},914:function(t,i,e){var r=e(2787),s=e(591),n=e(1750),o=e(9045),a=e(5338),l=(0,r.d)("list"),c=l[0],h=l[1],u=l[2];i["Z"]=c({mixins:[(0,o.X)((function(t){this.scroller||(this.scroller=(0,n.Ob)(this.$el)),t(this.scroller,"scroll",this.check)}))],model:{prop:"loading"},props:{error:Boolean,loading:Boolean,finished:Boolean,errorText:String,loadingText:String,finishedText:String,immediateCheck:{type:Boolean,default:!0},offset:{type:[Number,String],default:300},direction:{type:String,default:"down"}},data:function(){return{innerLoading:this.loading}},updated:function(){this.innerLoading=this.loading},mounted:function(){this.immediateCheck&&this.check()},watch:{loading:"check",finished:"check"},methods:{check:function(){var t=this;this.$nextTick((function(){if(!(t.innerLoading||t.finished||t.error)){var i,e=t.$el,r=t.scroller,n=t.offset,o=t.direction;i=r.getBoundingClientRect?r.getBoundingClientRect():{top:0,bottom:r.innerHeight};var a=i.bottom-i.top;if(!a||(0,s.x)(e))return!1;var l=!1,c=t.$refs.placeholder.getBoundingClientRect();l="up"===o?i.top-c.top<=n:c.bottom-i.bottom<=n,l&&(t.innerLoading=!0,t.$emit("input",!0),t.$emit("load"))}}))},clickErrorText:function(){this.$emit("update:error",!1),this.check()},genLoading:function(){var t=this.$createElement;if(this.innerLoading&&!this.finished)return t("div",{key:"loading",class:h("loading")},[this.slots("loading")||t(a.Z,{attrs:{size:"16"}},[this.loadingText||u("loading")])])},genFinishedText:function(){var t=this.$createElement;if(this.finished){var i=this.slots("finished")||this.finishedText;if(i)return t("div",{class:h("finished-text")},[i])}},genErrorText:function(){var t=this.$createElement;if(this.error){var i=this.slots("error")||this.errorText;if(i)return t("div",{on:{click:this.clickErrorText},class:h("error-text")},[i])}}},render:function(){var t=arguments[0],i=t("div",{ref:"placeholder",key:"placeholder",class:h("placeholder")});return t("div",{class:h(),attrs:{role:"feed","aria-busy":this.innerLoading}},["down"===this.direction?this.slots():i,this.genLoading(),this.genFinishedText(),this.genErrorText(),"up"===this.direction?this.slots():i])}})},7902:function(t,i,e){e(1958),e(2939)},2163:function(t,i,e){var r=e(591),s=e(789),n=e(2787),o=e(8546),a=e(1750),l=e(9045),c=(0,n.d)("sticky"),h=c[0],u=c[1];i["Z"]=h({mixins:[(0,l.X)((function(t,i){if(this.scroller||(this.scroller=(0,a.Ob)(this.$el)),this.observer){var e=i?"observe":"unobserve";this.observer[e](this.$el)}t(this.scroller,"scroll",this.onScroll,!0),this.onScroll()}))],props:{zIndex:[Number,String],container:null,offsetTop:{type:[Number,String],default:0}},data:function(){return{fixed:!1,height:0,transform:0}},computed:{offsetTopPx:function(){return(0,s.L)(this.offsetTop)},style:function(){if(this.fixed){var t={};return(0,o.Xq)(this.zIndex)&&(t.zIndex=this.zIndex),this.offsetTopPx&&this.fixed&&(t.top=this.offsetTopPx+"px"),this.transform&&(t.transform="translate3d(0, "+this.transform+"px, 0)"),t}}},watch:{fixed:function(t){this.$emit("change",t)}},created:function(){var t=this;!o.sk&&window.IntersectionObserver&&(this.observer=new IntersectionObserver((function(i){i[0].intersectionRatio>0&&t.onScroll()}),{root:document.body}))},methods:{onScroll:function(){var t=this;if(!(0,r.x)(this.$el)){this.height=this.$el.offsetHeight;var i=this.container,e=this.offsetTopPx,s=(0,a.cx)(window),n=(0,a.U4)(this.$el),o=function(){t.$emit("scroll",{scrollTop:s,isFixed:t.fixed})};if(i){var l=n+i.offsetHeight;if(s+e+this.height>l){var c=this.height+s-l;return c<this.height?(this.fixed=!0,this.transform=-(c+e)):this.fixed=!1,void o()}}s+e>n?(this.fixed=!0,this.transform=0):this.fixed=!1,o()}}},render:function(){var t=arguments[0],i=this.fixed,e={height:i?this.height+"px":null};return t("div",{style:e},[t("div",{class:u({fixed:i}),style:this.style},[this.slots()])])}})},9610:function(t,i,e){e(1958),e(1771)},591:function(t,i,e){function r(t){var i=window.getComputedStyle(t),e="none"===i.display,r=null===t.offsetParent&&"fixed"!==i.position;return e||r}e.d(i,{x:function(){return r}})}}]);